<html>

<head>

    <meta charset="UTF-8">
    <meta name="description" content="Free Web tutorials">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
    <meta name="author" content="Grigorios Krousiarlis">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> exercise9 </title>

    <style>
        #myTable,
        th,
        td {
            border: 1px solid black;
        }

        #cart {
            position: fixed;
            top: 0px;
            right: 0px;
            border: 1px solid black;
        }
    </style>
    <script src="http://lab1405.ecr8.com/official/productsDB.js">
    </script>
    <script>
        function createTable() {
            let myTable = document.getElementById("myTable");
            for (var rowIndex = 0; rowIndex < products.length; rowIndex++) {
                var newRow = myTable.insertRow(rowIndex);
                for (var cellIndex = 0; cellIndex < 3; cellIndex++) {
                    var newCell = newRow.insertCell(cellIndex);
                    newCell.innerHTML = products[rowIndex][cellIndex];
                    // newCell = newRow.insertCell(cellIndex);
                    // newCell.innerHTML = products[rowIndex][1];
                    // newCell = newRow.insertCell(cellIndex);
                    // newCell.innerHTML = products[rowIndex][2];
                    // newCell = newRow.insertCell(cellIndex);
                    // newCell.innerHTML = products[rowIndex][3];
                    // newCell = newRow.insertCell(cellIndex);
                }
                var newCell = newRow.insertCell(cellIndex);
                newCell.innerHTML = "<input type='button' value='Add to Cart' onclick='onCart(" + rowIndex + ")'>";
            }
        }
        let total = 0;
        function onCart(rowNumber) {
            let myCartTable = document.getElementById("myCartTable");
            let row = myCartTable.insertRow(-1);
            let cell1 = row.insertCell(0);
            let cell2 = row.insertCell(1);
            let cell3 = row.insertCell(2);
            let cell4 = row.insertCell(3);
            let cell5 = row.insertCell(4);
            cell1.innerHTML = rowNumber;
            cell2.innerHTML = products[rowNumber][0];
            cell3.innerHTML = products[rowNumber][2];
            let items = window.prompt("How many items of this product do you want?")
            while (isNaN(items) || Number(items) < 0) {
                items = window.prompt("How many items of this product do you want?")
            }
            cell4.innerHTML = items;
            cell5.innerHTML = +cell3.innerHTML;
            total += Number(items) * products[rowNumber][2]
            document.getElementById("totalcost").innerHTML = "the total cost is :" + total;

        }
    </script>
</head>

<body onload="createTable()">
    <table id="myTable"></table>

    <div id="cart">
        <table id="myCartTable">
            <tr>
                <td>ID</td>
                <td>Name</td>
                <td>Price</td>
                <td>Quantity</td>
                <td>SubTotal</td>
            </tr>
        </table>
    </div>
    <div id="totalcost">the total cost is : </div>
</body>

</html>